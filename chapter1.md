# 第一章 正则表达式入门

## 正则表达式中的字符分类
完整的正则表达式由两种字符构成. 特殊字符(special characters)称为**元字符**(metacharacters), 其他为**文字**(literal), 或者是普通文本字符(normal text characters).

## 本书的目的
本书的目的不是提供具体问题的解决方法, 而是教会读者利用正则表达式来**思考**, 解决遇到的各种问题.

## 行的起始和结束
在检查一行文本时, `｢^｣`代表一行的开始, `｢$｣`代表结束. 例如`｢^cat｣`只寻找行首的cat, `｢^｣`用来把匹配文本**锚定**(anchor)在这一行的开头. `｢^｣`和`｢$｣`匹配的是一个**位置**, 而不是具体的文本.

## 字符组

### 匹配若干字符之一
一个字符组(character class)中可以列举任意多个在某处期望匹配的字符, 例如`｢[123456]｣`匹配1到6中的任意一个数字. 在字符组内部, **字符组元字符**(character class metacharacter)'-'(连字符)表示一个范围: `｢H[1-6]｣`和`｢H[123456]｣`是完全一样的.

注意只有在
字符组内部, 连字符才是元字符, 但即使在字符组内部,连字符也不一定是元字符. 如果连字符出现在字符组的开头(另注: 字符组中只要连字符无法表示一个范围, 则均为普通字符), 那它表示一个普通的连字符.

```python
>>> import re
>>> re.findall('[a-]', 'a-b,cdsa-s')
['a', '-', 'a', '-']
>>> re.findall('[-1]', 'a-b,cdsa-s')
['-', '-']
```

### 排除型字符组
用`｢[^・・・]｣`取代`｢[・・・]｣`, 这个字符组就会匹配任何**未**列出的字符.

## 用点号匹配任意字符
元字符`｢.｣`是一个用来匹配任何字符的占位符, 但在字符组内部, 它是普通字符.

多选结构
`｢|｣`的意思是**或**, 它能够把子表达式组合成一个总的表达式, 而这个总表达式能够匹配任意的子表达式, 子表达式称为**多选分支**(alternative), 例如`｢Bob|Robert｣`能够匹配其中的任意一个正则表达式.
多选结构不能够超过括号的界限.

## 忽略大小写
在使用正则表达式的场景中, 忽略大小写有时是很重要的一个选项, 它们大多以i命名, 例如grep中是`-i`, Python中使用`re.I`或者`re.IGNORECASE`作为忽略大小写的标志位.

## 单词分界符
如果你使用正则表达式的场景支持**元字符序列**(metasequences)`｢\<｣`和`｢\>｣`, 就可以使用它们来匹配单词分界的位置, 可以把它们想象成单词版本的`｢^｣`和`｢$｣`.

注意`｢<｣`和`｢>｣`本身并不是元字符, 只有它们和反斜线结合起来, 整个序列才具有特殊的意义, 所以它们被称作元字符序列.

## 可选项元素
元字符`｢?｣`代表可选项, 把它加在一个字符后面表示此处容许这个字符出现, 但它的出现并非匹配成功的必要条件.

## 其他量词: 重复出现
元字符`｢+｣`表示之前紧邻的元素出现一次或多次, 而`｢*｣`表示之前紧邻的元素出现任意多次或不出现. 问号, 星号和加号这三个元字符统称为**量词**(quantifiers), 因为它们限定了所作用元素的重现次数.

### 规定重现次数的范围: 区间
有些场景能够使用元字符序列来自定义重现次数的区间, 例如`｢・・・{3,12}｣`, 能够容许重现3到12次.

## 括号及反向引用
反向引用容许我们匹配与表达式先前部分匹配的同样的文本. 在支持反向引用的工具软件中, 括号能够记忆其中的子表达式匹配的文本, 在一个表达式中我们可以使用多个括号, 再用`｢\1｣`, `｢\2｣`, `｢\3｣`等来表示第一, 第二,第三组括号匹配的文本, 括号是按照左侧开括号'('从左到右的出现顺序来排序的.

```python
>>> re.findall(r'(\w+) \1', 'drugn drugn test test')
['drugn', 'test']
```

## 更多的例子

### 变量名
许多程序设计语言都有标识符的概念, 标识符只包含字母, 数字以及下划线, 但不能以数字开头, 可以用`｢[a-zA-Z_][a-zA-Z_0-9]*｣`来匹配.

如果标识符长度有最大限制, 那么我们可以使用区间量词来进行限制, 例如用`｢{0,31}｣`来代替结尾的`｢*｣・

### 引号内的字符串
最简单的方法是`｢"[^"]*"｣`.

(第一章结束)


